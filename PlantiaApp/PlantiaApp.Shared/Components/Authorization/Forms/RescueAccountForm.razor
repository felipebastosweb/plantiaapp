@using PlantiaApp.Shared.Components.Authorization.Records

@inject NavigationManager Navigate

<h3>RescueAccountForm</h3>

<EditForm Model="UserInput">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="mb-3 Email">
        <label class="form-label">E-mail</label>
        <InputText @bind-Value="UserInput!.Email" class="@CssEmail" @onchange="EmailIsValid" />
    </div>

    <div class="mb-3">
        <button type="submit" class="btn btn-success">Confirm</button>
    </div>
</EditForm>

@code {
    private RescueAccountInput? UserInput { get; set; } = new();
    private string CssEmail { get; set; } = "form-control";


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
    }


    private void EmailIsValid()
    {
        CssEmail = string.IsNullOrEmpty(UserInput!.Email) ? "form-control InValid" : "form-control Valid";
    }

    public void OnSubmitClick()
    {
        Navigate.NavigateTo("/home");
    }

}
