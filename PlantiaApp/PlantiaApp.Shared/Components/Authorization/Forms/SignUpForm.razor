@using PlantiaApp.Shared.Components.Authorization.Records

@inject NavigationManager Navigate

<h3>SignUp</h3>

<EditForm Model="UserInput" OnSubmit="OnSubmitClick">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="mb-3 Username">
        <label>Username</label>
        <InputText @bind-Value="UserInput!.Username" class="@CssUsername" @oninput="UsernameIsValid" />
    </div>
    <div class="mb-3 Password">
        <label>Password</label>
        <InputText @bind-Value="UserInput!.Password" type="password" class="@CssPassword" @oninput="PasswordIsValid" />
    </div>
    <div class="mb-3">
        <label>Repeat Password</label>
        <InputText @bind-Value="UserInput!.RepeatPassword" class="@CssRepeatPassword" @oninput="RepeatPasswordIsEqualToPassword" />
    </div>
    <div class="mb-b3">
        <InputCheckbox @bind-Value="UserInput!.AcceptTerms" class="form-check-input" @oninput="AcceptTermsChecked" />
        <label class="form-check-label">
            To use this application you must agree to the Terms of Use and Privacy Policy.
        </label>
    </div>
    <div class="mb-3">
        <button type="submit" class="btn btn-success">Confirm</button>
    </div>
</EditForm>


@code {

     /***
     * Como visitante desejo 
     **/

    private SignUpInput? UserInput { get; set; } = new();

    private string CssUsername = "form-control";
    private string CssPassword = "form-control";
    private string CssRepeatPassword = "form-control";
    private string CssAcceptTerms = "form-check-input";

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
    }

    private void UsernameIsValid()
    {
        CssUsername = string.IsNullOrEmpty(UserInput!.Username) ? "form-control InValid" : "form-control Valid";
    }

    private void PasswordIsValid()
    {
        CssPassword = string.IsNullOrEmpty(UserInput!.Password) ? "form-control InValid" : "form-control Valid";
    }

    private void RepeatPasswordIsEqualToPassword()
    {
        CssRepeatPassword = UserInput!.RepeatPassword == UserInput!.Password ? "form-control InValid" : "form-control Valid";
    }

    private void AcceptTermsChecked()
    {
        CssAcceptTerms = UserInput!.AcceptTerms ? "form-check-input InValid" : "form-check-input Valid";
    }

    public void Update()
    {
        StateHasChanged();
    }

    public void OnSubmitClick()
    {
        Navigate.NavigateTo("/home");
    }

    /*
    */

}
